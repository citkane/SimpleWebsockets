<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Server Options · SimpleWebsockets</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">SimpleWebsockets</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><span class="tocitem">Server</span><ul><li><a class="tocitem" href="../WebsocketServer/">Server Usage</a></li><li class="is-active"><a class="tocitem" href>Server Options</a><ul class="internal"><li><a class="tocitem" href="#serverOptions"><span><code>serverOptions</code></span></a></li><li><a class="tocitem" href="#socketOptions"><span>socketOptions</span></a></li></ul></li></ul></li><li><span class="tocitem">Client</span><ul><li><a class="tocitem" href="../WebsocketClient/">Client Usage</a></li><li><a class="tocitem" href="../ClientOptions/">Client Options</a></li></ul></li><li><a class="tocitem" href="../WebsocketConnection/">Websocket Connection</a></li><li><a class="tocitem" href="../Authorization/">Authorization</a></li><li><a class="tocitem" href="../Errors/">Error handling</a></li><li><a class="tocitem" href="../Acknowledgments/">Acknowledgments</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Server</a></li><li class="is-active"><a href>Server Options</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Server Options</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/citkane/SimpleWebsockets.jl/blob/master/docs/src/ServerOptions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Server-Options"><a class="docs-heading-anchor" href="#Server-Options">Server Options</a><a id="Server-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Server-Options" title="Permalink"></a></h1><p>Options are passed to the server at two stages:</p><ul><li><a href="../WebsocketServer/#SimpleWebsockets.WebsocketServer"><code>WebsocketServer</code></a> constructor</li><li><a href="../WebsocketServer/#SimpleWebsockets.serve"><code>serve</code></a> method</li></ul><pre><code class="language-julia">using SimpleWebsockets

server = WebsocketServer([; serverOptions...])
# ...
serve(server[, port, host; socketOptions...])</code></pre><h2 id="serverOptions"><a class="docs-heading-anchor" href="#serverOptions"><code>serverOptions</code></a><a id="serverOptions-1"></a><a class="docs-heading-anchor-permalink" href="#serverOptions" title="Permalink"></a></h2><p>Overrides the default serverConfig</p><article class="docstring"><header><a class="docstring-binding" id="SimpleWebsockets.serverConfig" href="#SimpleWebsockets.serverConfig"><code>SimpleWebsockets.serverConfig</code></a> — <span class="docstring-category">Constant</span></header><section><div><p><strong>The default options for <a href="../WebsocketServer/#SimpleWebsockets.WebsocketServer"><code>WebsocketServer</code></a></strong></p><div class="admonition is-info"><header class="admonition-header">authfunction</header><div class="admonition-body"><p><code>false::Union{Bool, Function}</code></p><p>Provide a function with one parametre to check authentication. Must return <code>Bool</code>.</p><p>See <a href="../Authorization/#Http-request-validation">Http request validation</a>.</p></div></div><div class="admonition is-info"><header class="admonition-header">ssl</header><div class="admonition-body"><p><code>false::Bool</code></p><p>Whether to use ssl on the server.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Due to an underlying <a href="https://github.com/JuliaWeb/HTTP.jl/issues/318">issue</a> in HTTP, a client calling <code>ws://</code> on a <code>wss:://</code>  server will cause the server to error and close. Ensure that only ssl traffic can reach your server port.</p></div></div></div></div><div class="admonition is-info"><header class="admonition-header">sslcert</header><div class="admonition-body"><p><code>&quot;./snakeoil/snakeoil.crt&quot;::String</code> (default is in the SimpleWebsockets module dir, otherwise provide an absolute path)</p><p>Absolute path to your ssl cert</p></div></div><div class="admonition is-info"><header class="admonition-header">sslkey</header><div class="admonition-body"><p><code>&quot;./snakeoil/snakeoil.key&quot;::String</code> (default is in the SimpleWebsockets module dir, otherwise provide an absolute path)</p><p>Absolute path to your ssl key</p></div></div><div class="admonition is-info"><header class="admonition-header">maxReceivedFrameSize</header><div class="admonition-body"><p><code>64 * 0x0400::Integer</code> 64KiB</p><p>The maximum frame size that the server will accept</p></div></div><div class="admonition is-info"><header class="admonition-header">maxReceivedMessageSize</header><div class="admonition-body"><p><code>1 * 0x100000::Integer</code> 1MiB</p><p>The maximum assembled message size that the server will accept</p></div></div><div class="admonition is-info"><header class="admonition-header">fragmentOutgoingMessages</header><div class="admonition-body"><p><code>true::Bool</code></p><p>Outgoing frames are fragmented if they exceed the set threshold.</p></div></div><div class="admonition is-info"><header class="admonition-header">fragmentationThreshold</header><div class="admonition-body"><p><code>16 * 0x0400::Integer</code> 16KiB</p><p>Outgoing frames are fragmented if they exceed this threshold.</p></div></div><div class="admonition is-info"><header class="admonition-header">closeTimeout</header><div class="admonition-body"><p><code>5::Int</code></p><p>The number of seconds to wait after sending a close frame for an acknowledgement to return from the client. Will force close the client if timed out.</p></div></div><div class="admonition is-info"><header class="admonition-header">keepaliveTimeout</header><div class="admonition-body"><p><code>20::Union{Int, Bool}</code></p><p>The interval in number of seconds to solicit each client with a ping / pong response. The client will be closed if no pong is received within the interval.</p><p>The timer is only active when no data is received from the client within the interval, ie. the client will only be pinged if inactive for a period longer than the interval.</p><p><code>false</code> to disable.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Due to an underlying issue with <a href="https://juliaweb.github.io/HTTP.jl/stable/">HTTP</a>,  a server network disconnect will cause all clients to block in their listen loop,  only registering <code>disconnect</code> when the network re-connects.</p><p><code>keepaliveTimeout</code> uses ping/pong and will register the client disconnects more efficiently in network outage events.</p></div></div></div></div><div class="admonition is-info"><header class="admonition-header">useNagleAlgorithm</header><div class="admonition-body"><p><code>false::Bool</code></p><p>The Nagle Algorithm makes more efficient use of network resources by introducing a small delay before sending small packets so that multiple messages can be batched together before going onto the wire.  This however comes at the cost of latency, so the default is to disable it.  If you don&#39;t need low latency and are streaming lots of small messages, you can change this to <code>true</code></p><div class="admonition is-info"><header class="admonition-header">Julia 1.3</header><div class="admonition-body"><p>This setting only has an affect as of Julia 1.3</p></div></div></div></div><div class="admonition is-info"><header class="admonition-header">binary</header><div class="admonition-body"><p><code>false::Bool</code></p><p>Use Array{UInt8, 1} instead of String as messaging format.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/citkane/SimpleWebsockets.jl/blob/17e3c20544393a633035553b2bc029fa9a3fa29b/src/opt/vars.jl#L75-L164">source</a></section></article><h2 id="socketOptions"><a class="docs-heading-anchor" href="#socketOptions">socketOptions</a><a id="socketOptions-1"></a><a class="docs-heading-anchor-permalink" href="#socketOptions" title="Permalink"></a></h2><p><code>TCP</code> options to pass into the underlying <a href="https://juliaweb.github.io/HTTP.jl/stable/public_interface/#Server-/-Handlers-1">HTTP.Servers.listen</a></p><p>Handy options:</p><div class="admonition is-info"><header class="admonition-header">tcpisvalid</header><div class="admonition-body"><p>Implement connection filtering</p><p>Example using <a href="https://docs.julialang.org/en/v1.5/stdlib/Sockets/#Sockets.getpeername">Sockets.getpeername</a>: </p><pre><code class="language-julia">    using SimpleWebsockets, Sockets
    function tcpisvalid(tcp::Union{MbedTLS.SSLContext, Sockets.TCPSocket})::Bool
        local ipaddress
        try
            ipaddress = Sockets.getpeername(tcp)
        catch
            ipaddress = Sockets.getpeername(tcp.bio) # for MbedTLS.SSLContext
        end
        # (ip&quot;127.0.0.1&quot;, 0xd940)
        # Do your CORS, rate filtering, etc. logic here
        # return ::Bool
    end
    serve(server; tcpisvalid = tcpisvalid)</code></pre></div></div><div class="admonition is-info"><header class="admonition-header">verbose</header><div class="admonition-body"><p><code>::Bool</code></p><p>Turns on some helful logging.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This uses the the underlying <code>HTTP</code> mechanism, which has been observed to misreport the port number.</p></div></div></div></div><div class="admonition is-warning"><header class="admonition-header">sslconfig</header><div class="admonition-body"><p>Aspects of this option are behaving strangely in <a href="https://juliaweb.github.io/HTTP.jl/stable/public_interface/#Server-/-Handlers-1">HTTP.Servers.listen</a></p><p>Please use <a href="#SimpleWebsockets.serverConfig"><code>serverConfig</code></a>.ssl options instead.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../WebsocketServer/">« Server Usage</a><a class="docs-footer-nextpage" href="../WebsocketClient/">Client Usage »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 18 June 2022 11:51">Saturday 18 June 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
